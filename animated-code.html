<html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="description" content=""/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Animated.Code"/><meta name="twitter:description" content=""/><meta property="og:type" content="website"/><meta property="og:title" content="Animated.Code"/><meta property="og:description" content=""/><title>Animated.Code</title><link type="text/css" rel="stylesheet" href="app.css"/></head><body><div id='root'><div class="Layout_lugqar2"><aside class="sidebar_s9nrg4n"><input type="checkbox" class="menuButton_mzfqg8l" id="slide-sidebar" role="button"/><label class="menuIcon_m1mups47" for="slide-sidebar">☰</label><div class="menu_mdzibsv"><input type="search" value="" placeholder="Filter…" class="searchbar_s1nn5lbd"/><nav class="navigation_nlggdah"><a class="link_l5q2p2e" href="index.html">React Native Reanimated</a><a class="link_l5q2p2e" href="about-reanimated.html">About Reanimated</a><a class="link_l5q2p2e" href="getting-started.html">Getting Started</a><a class="link_l5q2p2e" href="transitions.html">Transitions</a><a class="link_l5q2p2e" href="value.html">Value</a><a class="link_l5q2p2e" href="clock-and-the-algorithm.html">Clock and the algorithm</a><a class="link_l5q2p2e" href="block.html">Block</a><a class="link_l5q2p2e" href="views--props--etc.html">Views, props, etc</a><a class="link_l5q2p2e active_al210no" href="animated-code.html">Animated.Code</a><a class="link_l5q2p2e" href="event-handling-with-reanimated-nodes.html">Event handling with reanimated nodes</a><div><div class="row_r1ol5l8s"><a class="link_l5q2p2e" href="">Base Nodes</a><button class="buttonIcon_b1e7pn53 expandedIcon_e12mn27x" style="opacity:0"><svg width="16px" height="16px" viewBox="0 0 16 16"><polygon stroke="none" stroke-width="1" fill-rule="evenodd" fill="currentColor" points="8 4 2 10 3.4 11.4 8 6.8 12.6 11.4 14 10"></polygon></svg></button></div><div class="groupItems_g19yxlm8 groupItemsVisible_g16acsvo"><a class="link_l5q2p2e" href="abs.html">abs</a><a class="link_l5q2p2e" href="acc.html">acc</a><a class="link_l5q2p2e" href="acos.html">acos</a><a class="link_l5q2p2e" href="add.html">add</a><a class="link_l5q2p2e" href="and.html">and</a><a class="link_l5q2p2e" href="asin.html">asin</a><a class="link_l5q2p2e" href="atan.html">atan</a><a class="link_l5q2p2e" href="block.html">block</a><a class="link_l5q2p2e" href="call.html">call</a><a class="link_l5q2p2e" href="ceil.html">ceil</a><a class="link_l5q2p2e" href="clock-running.html">clockRunning</a><a class="link_l5q2p2e" href="color.html">color</a><a class="link_l5q2p2e" href="concat.html">concat</a><a class="link_l5q2p2e" href="cond.html">cond</a><a class="link_l5q2p2e" href="cos.html">cos</a><a class="link_l5q2p2e" href="debug.html">debug</a><a class="link_l5q2p2e" href="defined.html">defined</a><a class="link_l5q2p2e" href="diff.html">diff</a><a class="link_l5q2p2e" href="diff-clamp.html">diffClamp</a><a class="link_l5q2p2e" href="divide.html">divide</a><a class="link_l5q2p2e" href="eq.html">eq</a><a class="link_l5q2p2e" href="event.html">event</a><a class="link_l5q2p2e" href="exp.html">exp</a><a class="link_l5q2p2e" href="floor.html">floor</a><a class="link_l5q2p2e" href="greater-or-eq.html">greaterOrEq</a><a class="link_l5q2p2e" href="greater-than.html">greaterThan</a><a class="link_l5q2p2e" href="interpolate.html">interpolate</a><a class="link_l5q2p2e" href="interpolate-colors.html">interpolateColors</a><a class="link_l5q2p2e" href="less-or-eq.html">lessOrEq</a><a class="link_l5q2p2e" href="less-than.html">lessThan</a><a class="link_l5q2p2e" href="log.html">log</a><a class="link_l5q2p2e" href="max.html">max</a><a class="link_l5q2p2e" href="min.html">min</a><a class="link_l5q2p2e" href="modulo.html">modulo</a><a class="link_l5q2p2e" href="multiply.html">multiply</a><a class="link_l5q2p2e" href="neq.html">neq</a><a class="link_l5q2p2e" href="not.html">not</a><a class="link_l5q2p2e" href="on-change.html">onChange</a><a class="link_l5q2p2e" href="or.html">or</a><a class="link_l5q2p2e" href="pow.html">pow</a><a class="link_l5q2p2e" href="proc.html">proc</a><a class="link_l5q2p2e" href="round.html">round</a><a class="link_l5q2p2e" href="set.html">set</a><a class="link_l5q2p2e" href="sin.html">sin</a><a class="link_l5q2p2e" href="sqrt.html">sqrt</a><a class="link_l5q2p2e" href="start-clock.html">startClock</a><a class="link_l5q2p2e" href="stop-clock.html">stopClock</a><a class="link_l5q2p2e" href="sub.html">sub</a><a class="link_l5q2p2e" href="tan.html">tan</a></div></div><div><div class="row_r1ol5l8s"><a class="link_l5q2p2e" href="">Animations</a><button class="buttonIcon_b1e7pn53 expandedIcon_e12mn27x" style="opacity:0"><svg width="16px" height="16px" viewBox="0 0 16 16"><polygon stroke="none" stroke-width="1" fill-rule="evenodd" fill="currentColor" points="8 4 2 10 3.4 11.4 8 6.8 12.6 11.4 14 10"></polygon></svg></button></div><div class="groupItems_g19yxlm8 groupItemsVisible_g16acsvo"><a class="link_l5q2p2e" href="decay.html">decay</a><a class="link_l5q2p2e" href="spring.html">spring</a><a class="link_l5q2p2e" href="spring-utils.html">springUtils</a><a class="link_l5q2p2e" href="timing.html">timing</a></div></div><a class="link_l5q2p2e" href="declarative-animation-api.html">Declarative Animation API</a><a class="link_l5q2p2e" href="examples.html">Examples</a></nav></div></aside><main class="Container_c119hgic"><div class="Inner_ir6lat6"><div><h1 id="animatedcode">
          <a class="anchor" href="#animated-code">
            <svg width="16" height="16">
              <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
            </svg>
          </a>
        <code>Animated.Code</code></h1>
<hr />
<p><code>Animated.Code</code> component allows you to define reanimated nodes that you want to execute when their input nodes updates, but aren't necessarily strictly related to some view properties and hence it does not feel right to place them under <code>translate</code> or other prop of an <code>Animated.View</code>. This component renders <code>null</code>, so you can place it in any place you want in your render method. It is required that your code is put inside component as we rely on <code>componentDidMount</code> and <code>componentWillUnmount</code> callbacks to install and cleanup animated nodes. Note that the code you put is going to be executed only once. We currently have no way of telling if your code changes and so it will only be run in <code>componentDidMount</code>. If you wish for your reanimated nodes to be updated when the component updates, you can update the <code>key</code> property of the <code>Animated.Code</code> component, which will effectively unmount old and mount new versions of it in the React tree.</p>
<pre><code class="language-js"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Animated.Code</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">block</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>transX1<span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_transX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>transX2<span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_transX<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>transX3<span class="token punctuation">,</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_transX<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>transX4<span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_transX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Animated.Code</span><span class="token punctuation">&gt;</span></span></code></pre>
<p>or:</p>
<pre><code class="language-js"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Animated.Code</span>
  <span class="token attr-name">exec</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>transX1<span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_transX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>transX2<span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_transX<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>transX3<span class="token punctuation">,</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_transX<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>transX4<span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_transX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="token punctuation">/&gt;</span></span></code></pre>
<h2 id="animatedusecode">
          <a class="anchor" href="#animated-usecode">
            <svg width="16" height="16">
              <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
            </svg>
          </a>
        <code>Animated.useCode</code></h2>
<p>The <code>useCode</code> hook acts as an alternative to the <code>Animated.Code</code> component.</p>
<pre><code class="language-js">Animated<span class="token punctuation">.</span><span class="token function">useCode</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Node <span class="token operator">|</span> Node<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> boolean <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> undefined<span class="token punctuation">,</span> 
    <span class="token punctuation">[</span><span class="token operator">...</span>dependencies<span class="token punctuation">]</span>
<span class="token punctuation">)</span></code></pre>
<p>It's passed as 1st parameter a factory function that should return an optional animated node, or array of nodes (which will be then placed in a <code>block</code> node), and as 2nd parameter, an array of dependencies. It will update that node, both when the component mounts and every time a value in that array changes. It does nothing on versions of React Native that don't support hooks (&lt;0.59).</p>
<pre><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">[</span>animated<span class="token punctuation">,</span> setAnimated<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>offset<span class="token punctuation">,</span> setOffset<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Animated<span class="token punctuation">.</span><span class="token function">useCode</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          animated <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span>
              <span class="token comment">//...</span>
              <span class="token keyword">set</span><span class="token punctuation">(</span>transX1<span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span>_transX<span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">]</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token punctuation">[</span>animated<span class="token punctuation">,</span> offset<span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>We recommend to use <code>useCode()</code> with the <code>react-hooks/exhaustive-deps</code> <a href="https://www.npmjs.com/package/eslint-plugin-react-hooks">eslint rule</a>.</p>
</div></div></main></div></div>
    <script>
      window.__INITIAL_PATH__ = 'animated-code';
    </script>
  <script src="app.bundle.js"></script></body></html>